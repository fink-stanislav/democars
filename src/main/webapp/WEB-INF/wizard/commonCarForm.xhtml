<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j">
    <script type="text/javascript">
        function isValidationFailed() {
            var messageForMake = document.getElementById('carCreateForm:messageForMake');
            var messageForModel = document.getElementById('carCreateForm:messageForModel');
            var messageForPrice = document.getElementById('carCreateForm:messageForPrice');
            var messageForMileage = document.getElementById('carCreateForm:messageForMileage');
            var messageForVin = document.getElementById('carCreateForm:messageForVin');
            var messageForCondition = document.getElementById('carCreateForm:messageForCondition');

            var elements = new Array(
                    messageForMake,
                    messageForModel,
                    messageForPrice,
                    messageForMileage,
                    messageForVin,
                    messageForCondition);

            for (var i in elements) {
                if (elements[i].hasChildNodes()) {
                    return true;
                }
            }

            return false;
        }
    </script>
    <a4j:jsFunction name="callFunc" onbegin="doSomething()"/>
    <h:panelGrid columns="3" styleClass="panel-text">
        <f:facet name="header">
            <h:outputText value="Common Car Information"/>
        </f:facet>
        <h:outputText value="Make"/>
        <h:inputText id="makeInput" value="#{createCarBean.car.model.make}">
            <f:validateRequired/>
            <rich:validator event="blur"/>
        </h:inputText>
        <rich:message for="makeInput" id="messageForMake"/>

        <h:outputText value="Model"/>
        <h:inputText id="modelInput" value="#{createCarBean.car.model.model}">
            <f:validateRequired/>
            <rich:validator event="blur"/>
        </h:inputText>
        <rich:message for="modelInput" id="messageForModel"/>

        <h:outputText value="Price"/>
        <h:inputText id="priceInput" value="#{createCarBean.car.price}">
            <f:validateRequired/>
            <f:validateDoubleRange minimum="0" maximum="100000"/>
            <rich:validator event="blur"/>
        </h:inputText>
        <rich:message for="priceInput" id="messageForPrice"/>

        <h:outputText value="Mileage"/>
        <h:inputText id="mileageInput" value="#{createCarBean.car.mileage}">
            <f:validateLongRange minimum="0" maximum="1000000"/>
            <f:validateRequired/>
            <rich:validator event="blur"/>
        </h:inputText>
        <rich:message for="mileageInput" id="messageForMileage"/>

        <h:outputText value="Vin"/>
        <h:inputText id="vinInput" value="#{createCarBean.car.vin}">
            <f:validateLength minimum="5" maximum="20"/>
            <f:validateRequired/>
            <rich:validator event="blur"/>
        </h:inputText>
        <rich:message for="vinInput" id="messageForVin"/>

        <h:outputText value="Condition"/>
        <rich:select id="conditionInput" value="#{createCarBean.car.condition}"
                     defaultLabel="Select value from list">
            <f:selectItem itemLabel="New" itemValue="NEW"/>
            <f:selectItem itemLabel="Used" itemValue="USED"/>
            <f:validateRequired/>
            <rich:validator event="blur"/>
        </rich:select>
        <rich:message for="conditionInput" id="messageForCondition"/>
        <a4j:commandButton id="nextButton" value="Next" onclick="return !isValidationFailed()">
            <rich:toggleControl disableDefault="true" targetItem="@next" event="click"/>
        </a4j:commandButton>
    </h:panelGrid>
</ui:composition>